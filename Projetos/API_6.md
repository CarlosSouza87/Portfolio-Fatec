<h1 align="center"> API - 6º Semestre</h1>
<h2 align="center">:office: EMPRESA - VISIONA </h2>



# :clipboard: Desafio/Projeto

Foi proposto uma solução abrangente que envolve a coleta e o tratamento dos dados do programa Federal ProAgro, a reestruturação eficiente dos dados e o desenvolvimento de um Sistema de Informação Geográfica (SIG) personalizado, fornecendo informações de forma mais simples e organizada para o usuário. Essa abordagem buscou facilitar a compreensão e análise dos dados, contribuindo para melhorias nos processos internos da empresa.
Além disso,o projeto possui um banco de dados robusto, onde todas as informações das glebas são armazenadas de maneira organizada e acessível.Essa abordagem assegura que dados críticos estejam disponíveis para consulta e análise, promovendo uma gestão eficaz das áreas agrícolas.Para melhorar a usabilidade,foi implementada uma funcionalidade intuitiva de salvamento de registros, permitindo que os usuários capturem instantâneos específicos de suas consultas ou análises.
Incluimos a capacidade de salvar imagens das séries temporais, possibilitando a documentação visual das tendências observadas, visando a praticidade, com a qual inclui uma opção de download que permite aos usuários obterem facilmente informações detalhadas sobre as glebas.

## :desktop_computer: Tecnologias Utilizadas
<ul>
<img src="https://raw.githubusercontent.com/devicons/devicon/1119b9f84c0290e0f0b38982099a2bd027a48bf1/icons/github/github-original-wordmark.svg" width="100"    height="100" />	
<img src="https://raw.githubusercontent.com/devicons/devicon/1119b9f84c0290e0f0b38982099a2bd027a48bf1/icons/python/python-plain-wordmark.svg" width="100" height="100" />
<img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/javascript/javascript-plain.svg" width="100" height="100" />
<img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/css3/css3-original.svg" width="100" height="100" />
<img src="https://github.com/TechVisionn/tech-parent/blob/main/docs/Images/React-icon.svg.png" width="100" height="100" />
 <img src="https://raw.githubusercontent.com/devicons/devicon/1119b9f84c0290e0f0b38982099a2bd027a48bf1/icons/mysql/mysql-original-wordmark.svg" width="100"    height="100" />	 
 <img src="https://github.com/TechVisionn/tech-parent/blob/main/docs/Images/Mongodb-PNG-Image-HD.png" width="100"    height="100"/>

</ul>
 <br></br>
 <a href="https://github.com">Github</a>: O Github é uma plataforma de gerenciamento de código fonte que permite hospedar, gerenciar e colaborar em projetos de desenvolvimento de software usando o sistema de controle de versão Git e esta plataforma foi utilizada como repositório de projeto. 
<br></br>
<a href="https://www.mysql.com/">MySQL</a>: É um sistema de gerenciamento de banco de dados (SGBD) relacional, ou seja, que utiliza a linguagem SQL como interface. Lançado sobre a licença GPL, possui como desenvolvedor a Oracle Corporation e foi utilizado como Sistema Gerenciador de Banco de Dados (SGBD) do projeto em nuvem utilizando a plataforma azure.
<br></br>
<a href="https://www.mongodb.com/pt-br">MongoDB</a>: É um banco de dados NoSQL que armazena dados em documentos flexíveis usando um formato JSON,oferece escalabilidade e flexibilidade para lidar com grandes volumes de dados e modelos de dados dinâmicos e foi utilizado para a parte LGPD do projeto em quesito de cadastro do usuario.
<br></br>
<a href="https://www.python.org">Python</a>: Python é uma linguagem de programação versátil e amplamente utilizada, conhecida por sua simplicidade, legibilidade e capacidade de criar aplicativos eficientes. É uma escolha popular para o desenvolvimento de aplicativos web, científicos, de automação,e muito mais, devido à sua vasta gama de bibliotecas e comunidade ativa de desenvolvedores e foi utilzado para a montagem do backend da aplicação.
<br></br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">Javascript</a>: É uma linguagem de programação amplamente usada para desenvolver aplicativos web interativos e dinâmicos, utlizada para navegador do usuário, permitindo que os desenvolvedores criem experiências interativas e responsivas nas páginas da web e aplicada para a montagem do front end da aplicação.
<br></br>
<a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a>: É uma linguagem de estilo usada para controlar a apresentação e a formatação de páginas da web e permite que você defina cores, fontes, margens, espaçamentos e outros estilos visuais para elementos HTML. Com o CSS, é possivel separar a estrutura (HTML) do estilo (CSS) em um site, o que torna mais fácil e flexível a alteração da aparência de um site sem alterar a estrutura. Neste projeto foi utilizado para a aplicação do design e estruturação do componentes do front end do projeto.
<br></br>

<a href="https://reactjs.org">React</a>: Aplicado como um framework de código aberto e uma biblioteca JavaScript, React é utilizado para construir interfaces de usuário interativas e dinâmicas em aplicações web. É frequentemente empregado em projetos para criar componentes reutilizáveis, gerenciar o estado do aplicativo e fornecer uma experiência de usuário rica. React é conhecido por sua eficiência e poderosa capacidade de renderização, o que o torna uma escolha popular entre desenvolvedores para o desenvolvimento de aplicações web modernas e este framework foi aplicado no front end do projeto.


<h3 align="center"> Hard Skills </h3>
  <table align="center">
    <tr>
      <th width="300px">Tecnologia/Metodologia</th>
      <th width="300px">Classificação</th>
    </tr>
    <tr>
      <td>Metodologia Scrum</td>
      <td>★★★★★</td>
    </tr>
    <tr>
      <td>MySQL</td>
      <td>★★★★★</td>
    </tr>	
   <tr>
      <td>MongoDB </td>
      <td>★☆☆☆☆</td>
    </tr>	
    <tr>
      <td>GITHUB</td>
      <td>★★★★★</td>
    </tr>
     
  </table>

 <h3 align="center">Soft Skills</h3>
  <table align="center">
    <tr>
      <th width="300px">Habilidade</th>
      <th width="300px">Descrição</th>
    </tr>
    <tr>
      <td>Comunicação Eficaz</td>
      <td>Trabalhei a capacidade de se expressar verbalmente, de forma clara e concisa, e de ouvir e compreender as mensagens dos integrantes da equipe</td>
    </tr>
    <tr>
      <td>Trabalho em Equipe</td>
      <td>Trabalhei com outros integrantes  para atingir objetivos comuns, respeitando as opiniões e contribuindo para um ambiente de trabalho positivo.</td>
    </tr>
    <tr>
      <td>Liderança</td>
      <td>Trabalhei na motivação dos integrantes da equipe, influenciando positivamente e contribuindo para o sucesso de todos</td>
</table>

-------------------------------------------------------------------------------------------------------------------------------------------------------------

 ## :dart: Contribuições Pessoais: 

Desenvolvi  em parceria com outro componente do grupo um modelo lógico detalhado,analisando e desenhando cuidadosamente as entidades e seus atributos, bem como os relacionamentos necessarios entre elas.Essa estruturação foi muito importante na implementação de um banco de dados capaz de suportar com qualidade o acesso aos metadados,a definição precisa dos relacionamentos entre as entidades foi crucial para garantir a consistência das informações armazenadas.
Além da arquitetura do banco de dados,bem como seu gerenciamento,foram implementadas consultas SQL estratégicass para recuperar os metadados de maneira rápida e precisa, contribuindo de maneira decisiva  na construção do dashboard de monitoramento do projeto 
de maneira rapida e eficiente.
Trabalhei de perto com a equipe, também executando meu papel de Scrum master, resolvendo atritos entre os membros do grupo, com reuniões de pacificações para resolver a diversas divergencias pessoas dentro do projeto, buscando sempre a integração perfeita entre os membros do grupo.
Todas essas ações, desde a concepção do Modelo Lógico até a implementação das consultas SQL,além da administração de pessoas, foi fundamental na construção de uma estrutura coesa e eficaz para  desenvolvimento e o sucesso desse  projeto.

### Modelo Lógico

	Entidade: Gleba_SP

	Atributos:
	  REF_BACEN (Chave Primária)
	  NU_ORDEM
	  NU_IDENTIFICADOR
	  NU_INDICE_GLEBA
	  NU_INDICE_PONTO
	  CGL_VL_ALTITUDE
	  VL_VERTICES (Tipo Geometry)
	A tabela glebas_sp armazena informações relacionadas a glebas de terras, Brasil.
        Aqui estão algumas explicações para os atributos:

	REF_BACEN: Referência relacionada ao Banco Central (Identificador único para cada registro).
	NU_ORDEM: Número de ordem.
	NU_IDENTIFICADOR: Número identificador.
	NU_INDICE_GLEBA: Número de índice da gleba.
	NU_INDICE_PONTO: Número de índice do ponto.
	CGL_VL_ALTITUDE: Valor da altitude.
	VL_VERTICES: Dados geométricos representando os vértices (pontos) da gleba.

	No seu caso, a coluna VL_VERTICES é do tipo geometry e é utilizada para armazenar informações
       sobre a forma geográfica da gleba do terreno. Isso pode incluir coordenadas espaciais que definem os
       vértices da gleba,permitindo representar a forma da área de terra no plano geográfico.
  
      Modelo de banco de dados utilizado um sistema de armazenamento de coordenadas de áreas de terrenos.

     ### Script para Coordenadas
     
      Python
	
 	import pandas as pd
	from shapely.geometry import Point
	from sqlalchemy import create_engine, Column, Integer, Text, Float, Geometry
	from sqlalchemy.ext.declarative import declarative_base
	from sqlalchemy.orm import sessionmaker
	
	# Definindo a classe da tabela
	Base = declarative_base()
	
	class Gleba(Base):
	    __tablename__ = 'glebas_sp'
	
	    REF_BACEN = Column(Integer, primary_key=True)
	    NU_ORDEM = Column(Text)
	    NU_IDENTIFICADOR = Column(Text)
	    NU_INDICE_GLEBA = Column(Text)
	    NU_INDICE_PONTO = Column(Integer)
	    VL_LATITUDE = Column(Text)
	    VL_LONGITUDE = Column(Text)
	    CGL_VL_ALTITUDE = Column(Text)
	    VL_VERTICES = Column(Geometry(geometry_type='POINT', srid=4326))
	
	# Configurações do banco de dados
	db_user = 'techninjas'
	db_password = '**********'
	db_host = 'techninjas.microsoft'
	db_port = '3306'
	db_name = 'techvision'
	
	# Criando a conexão com o banco de dados
	engine = create_engine(f"mysql+mysqlconnector://{db_user}:{db_password}@{db_host}:{db_port}/{db_name}")
	
	# Criando a tabela no banco de dados (caso não exista)
	Base.metadata.create_all(engine)
	
	# Lendo o arquivo CSV
	csv_path = '/glebas.csv'
	df = pd.read_csv(csv_path)
	
	# Criando objetos geométricos e inserindo no banco de dados
	Session = sessionmaker(bind=engine)
	session = Session()
	
	for _, row in df.iterrows():
	    latitude = float(row['VL_LATITUDE'])
	    longitude = float(row['VL_LONGITUDE'])
	    point = Point(longitude, latitude)
	
	    gleba = Gleba(
	        REF_BACEN=row['REF_BACEN'],
	        NU_ORDEM=row['NU_ORDEM'],
	        NU_IDENTIFICADOR=row['NU_IDENTIFICADOR'],
	        NU_INDICE_GLEBA=row['NU_INDICE_GLEBA'],
	        NU_INDICE_PONTO=row['NU_INDICE_PONTO'],
	        VL_LATITUDE=row['VL_LATITUDE'],
	        VL_LONGITUDE=row['VL_LONGITUDE'],
	        CGL_VL_ALTITUDE=row['CGL_VL_ALTITUDE'],
	        VL_VERTICES=point
	    )
	
	    session.add(gleba)
	
	session.commit()
	session.close()

 ## Utilização de Bibliotecas:
  Pandas: Usada para manipulação de dados, especialmente para ler e escrever dados em formato de DataFrame.
  shapely.geometry.Point: Usada para representar objetos geométricos do tipo ponto.
  sqlalchemy: Uma biblioteca SQL para Python, usada para interagir com o banco de dados.
  declarative_base: Usada para criar classes de mapeamento ORM.
  sessionmaker: Usada para criar instâncias de sessão para interação com o banco de dados.

 ## Definição da Classe de Tabela:
  declarative_base: Função que retorna uma classe base para declarar modelos ORM.
  Gleba: Classe que herda de Base e representa a tabela glebas_sp no banco de dados.

 ## Criação da Conexão com o Banco de Dados:
  Criação de uma instância de Engine do SQLAlchemy para interagir com o banco de dados MySQL.

 ## Criação da Tabela no Banco de Dados:
   Criação da tabela glebas_sp no banco de dados se ela não existir.

 ## - Leitura do Arquivo CSV:
   Leitura do arquivo CSV usando o pandas e armazenamento dos dados em um DataFrame (df).

 ## Criação de Objetos Geométricos e Inserção no Banco de Dados:
  Um loop através do DataFrame, onde para cada linha, são criados objetos geométricos do tipo Point a partir 
  das colunas VL_LATITUDE e VL_LONGITUDE.
  Um objeto Gleba é criado para cada linha do DataFrame, e a coluna VL_VERTICES é preenchida com o objeto geométrico
  correspondente.Os objetos são adicionados à sessão e, ao final do loop, as alterações são confirmadas no banco de dados. 

</details> 

#### Querys para retorno de informações 

   ### Query Retorno Glebas
     
   ```MYSQL
	
	SELECT 
	    Glebas.REF_BACEN,
	    Glebas.VL_VERTICES,
	    S5.DT_EMISSAO AS DATA_EMISSAO_REFBACEN,
	    CASE 
	        WHEN S5.CD_ESTADO = 'SP' THEN 'São Paulo'
	        ELSE S5.CD_ESTADO 
	    END AS ESTADO,
	    GARAN_EMPREEND.DESCRICAO AS TIPO_SEGURO,
	    S5.DT_FIM_PLANTIO AS DATA_PLANTIO,
	    GRAO_IRRIG.DESCRICAO AS TIPO_IRRIGACAO,
	    GRAO.DESCRICAO AS TIPO_GRAO,
	    S5.VL_ALIQ_PROAGRO AS VALOR_ALIQUOTA,
	    S5.VL_JUROS AS JUROS_INVESTIMENTO,
	    S5.VL_RECEITA_BRUTA_ESPERADA AS RECEITA_BRUTA_ESTIMADA,
	    S5.DT_FIM_COLHEITA AS DATA_FIM_COLHEITA
	FROM (
	    SELECT 
	        GLP.REF_BACEN,
	        GLP.VL_VERTICES
	    FROM 
		techdata.glebas_sp GLP
	    ORDER BY 
		GLP.NU_INDICE_PONTO
	) AS Glebas
	JOIN techdata.saida5 S5 ON S5.REF_BACEN = Glebas.REF_BACEN
	JOIN  techvision.grao_semente GRAO ON GRAO.CODIGO = S5.CD_TIPO_GRAO_SEMENTE
	LEFT JOIN  techvision.tipo_irrigacao GRAO_IRRIG ON GRAO_IRRIG.CODIGO = S5.CD_TIPO_IRRIGACAO
	LEFT JOIN (
	    SELECT 
	        CODIGO, 
		DESCRICAO
	    FROM 
		techvision.tipo_garantia_empreendimento
	) AS GARAN_EMPREEND ON GARAN_EMPREEND.CODIGO = S5.CD_TIPO_SEGURO
	GROUP BY
	    Glebas.REF_BACEN, S5.DT_EMISSAO, 		
	    S5.CD_ESTADO, GARAN_EMPREEND.DESCRICAO, 
	    GRAO_IRRIG.DESCRICAO, GRAO.DESCRICAO,
	    S5.DT_FIM_PLANTIO, S5.CD_TIPO_IRRIGACAO, 
	    S5.VL_ALIQ_PROAGRO,	S5.CD_TIPO_CULTIVO, 
	    S5.VL_JUROS, S5.VL_RECEITA_BRUTA_ESPERADA, 
	    S5.DT_FIM_COLHEITA, S5.VL_PERC_CUSTO_EFET_TOTAL
  
   ```
 #### Seleção de Dados da Tabela Glebas:
    A subconsulta interna (SELECT GLP.REF_BACEN, GLP.VL_VERTICES FROM techdata.glebas_sp GLP 
    ORDER BY GLP.NU_INDICE_PONTO) seleciona os campos REF_BACEN e VL_VERTICES da tabela glebas_sp,
    ordenados pelo NU_INDICE_PONTO.
    
    Essa subconsulta é renomeada como Glebas e serve como base para a junção posterior.

#### Junção com a Tabela saida5:
    A consulta principal junta a subconsulta Glebas com a tabela techdata.saida5 usando a condição 
    S5.REF_BACEN = Glebas.REF_BACEN.
    Além disso, são realizadas junções adicionais com as tabelas techvision.grao_semente, 
    techvision.tipo_irrigacao e techvision.tipo_garantia_empreendimento.

#### Seleção de Campos e Manipulação de Dados:
    A consulta seleciona vários campos, incluindo REF_BACEN, VL_VERTICES, DT_EMISSAO, CD_ESTADO, e outros.
    A cláusula CASE é usada para alterar o valor da coluna ESTADO dependendo do valor de CD_ESTADO,
    renomeando o estado "SP" para "São Paulo".

#### Agrupamento e Funções de Agregação:
    Os resultados são agrupados usando a cláusula GROUP BY com base em várias colunas, incluindo 
    REF_BACEN, DT_EMISSAO, CD_ESTADO, e outros.
    Funções de agregação, como SUM ou AVG, não estão presentes na consulta, mas poderiam ser adicionadas se necessário.

#### Resultados da Consulta:
    A consulta retorna informações sobre glebas agrícolas, suas safras associadas, tipos de grãos,
    informações sobre irrigação, seguro agrícola e outros detalhes relevantes.
    Os resultados são organizados de acordo com as colunas especificadas na cláusula GROUP BY.

### Conhecimentos aprimorados/adquiridos

 *  Ao longo do projeto aprendi novas funções e comandos sobre bancos de dados, melhorei e aprofundei minha compreensão dos conceitos 
    fundamentais e das práticas essenciais associadas a essa tecnologia.
 *  A capacidade de criar consultas SQL eficientes para recuperar, inserir, atualizar e excluir dados proporcionou-me uma base 
    sólida para a manipulação eficaz de informações em um ambiente de banco de dados relacional.
 *  Com isso,posso aplicar no meu trabalho, os conhecimentos adquiridos, facilitando a migração,manipulação e extração das
    informações necessárias nos projeto que administro no meu dia a dia.
 *  Aprendi as práticas recomendadas para realizar backups regulares e garantir a recuperação eficiente de dados em situações de falha.
 *  A segurança e a integridade dos dados são prioridades, e a capacidade de restaurar dados é essencial para a continuidade dos 
    negócios.

  <h2 align="center"> GITHUB DO PROJETO</h2>
  <h3 align="center">https://github.com/TechVisionn/tech-parent</h3>
